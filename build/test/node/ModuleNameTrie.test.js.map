{"version":3,"file":"ModuleNameTrie.test.js","sourceRoot":"","sources":["../../../test/node/ModuleNameTrie.test.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAEH,iCAAiC;AAEjC,2EAAwE;AAExE,QAAQ,CAAC,gBAAgB,EAAE,GAAG,EAAE;IAC9B,QAAQ,CAAC,QAAQ,EAAE,GAAG,EAAE;QACtB,MAAM,IAAI,GAAG,IAAI,+BAAc,EAAE,CAAC;QAClC,MAAM,OAAO,GAAG;YACd,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,GAAE,CAAC,EAAE;YACxC,EAAE,UAAU,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,EAAE,GAAE,CAAC,EAAE;YAC1C,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,GAAE,CAAC,EAAE;YACxC,EAAE,UAAU,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,EAAE,GAAE,CAAC,EAAE;YAC1C,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,GAAE,CAAC,EAAE;SAC7B,CAAC;QACd,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAExC,EAAE,CAAC,oDAAoD,EAAE,GAAG,EAAE;YAC5D,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oDAAoD,EAAE,GAAG,EAAE;YAC5D,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8DAA8D,EAAE,GAAG,EAAE;YACtE,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;gBACjC,OAAO,CAAC,CAAC,CAAC;gBACV,OAAO,CAAC,CAAC,CAAC;aACX,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,gCAAgC,EAAE,GAAG,EAAE;YAC9C,EAAE,CAAC,iDAAiD,EAAE,GAAG,EAAE;gBACzD,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;oBACnC,OAAO,CAAC,CAAC,CAAC;oBACV,OAAO,CAAC,CAAC,CAAC;oBACV,OAAO,CAAC,CAAC,CAAC;iBACX,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;YAC7C,EAAE,CAAC,oDAAoD,EAAE,GAAG,EAAE;gBAC5D,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,sBAAsB,EAAE,IAAI,EAAE,CAAC,EAAE;oBACrE,OAAO,CAAC,CAAC,CAAC;oBACV,OAAO,CAAC,CAAC,CAAC;oBACV,OAAO,CAAC,CAAC,CAAC;iBACX,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as assert from 'assert';\nimport { Hooked } from '../../src/platform/node/RequireInTheMiddleSingleton';\nimport { ModuleNameTrie } from '../../src/platform/node/ModuleNameTrie';\n\ndescribe('ModuleNameTrie', () => {\n  describe('search', () => {\n    const trie = new ModuleNameTrie();\n    const inserts = [\n      { moduleName: 'a', onRequire: () => {} },\n      { moduleName: 'a/b', onRequire: () => {} },\n      { moduleName: 'a', onRequire: () => {} },\n      { moduleName: 'a/c', onRequire: () => {} },\n      { moduleName: 'd', onRequire: () => {} }\n    ] as Hooked[];\n    inserts.forEach(trie.insert.bind(trie));\n\n    it('should return a list of exact matches (no results)', () => {\n      assert.deepEqual(trie.search('e'), []);\n    });\n\n    it('should return a list of exact matches (one result)', () => {\n      assert.deepEqual(trie.search('d'), [inserts[4]]);\n    });\n\n    it('should return a list of exact matches (more than one result)', () => {\n      assert.deepEqual(trie.search('a'), [\n        inserts[0],\n        inserts[2]\n      ]);\n    });\n\n    describe('maintainInsertionOrder = false', () => {\n      it('should return a list of matches in prefix order', () => {\n        assert.deepEqual(trie.search('a/b'), [\n          inserts[0],\n          inserts[2],\n          inserts[1]\n        ]);\n      });\n    });\n\n    describe('maintainInsertionOrder = true', () => {\n      it('should return a list of matches in insertion order', () => {\n        assert.deepEqual(trie.search('a/b', { maintainInsertionOrder: true }), [\n          inserts[0],\n          inserts[1],\n          inserts[2]\n        ]);\n      });\n    });\n  });\n});\n"]}